<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <style>
    .card-grey { background-color: #e9ecef; }
    .bg-orange { background-color: #fd7e14; }
    .invalid-field { border: 2px solid #dc3545; }
    #contactForm { padding-top: 1in; }

    .overlay-btn-grid {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: grid;
      gap: 10px;
      z-index: 1060;
      width: 200px;
      background: rgba(255,255,255,0.95);
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      cursor: move;
    }

    .phone-pad {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #fff;
      border-top: 2px solid #ccc;
      z-index: 1070;
      padding: 1rem;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
      display: none;
      width: 300px;
      border-radius: 10px 10px 0 0;
      margin: auto;
      left: calc(50% - 150px);
      cursor: move;
    }

    .phone-pad .btn {
      width: 30%;
      margin: 5px;
      font-size: 1.5rem;
    }

    .modal.modal-top .modal-dialog {
      position: fixed;
      top: 0;
      margin: 0;
      width: 100%;
      max-width: none;
      transition: transform 0.3s ease-out;
    }

    .modal.modal-top .modal-dialog-centered {
      transform: translateY(-100%);
    }

    .modal.show .modal-dialog-centered {
      transform: translateY(0);
    }
  </style>
</head>
<body class="bg-light">
<div class="container py-3">
  <div class="row justify-content-center">
    <div class="col-lg-10 col-md-11 col-sm-12">
      <form id="contactForm" action="https://formsubmit.co/ayoblab@gmail.com" method="POST" enctype="multipart/form-data">
        <div class="card card-grey shadow-sm mb-4">
          <div class="card-header bg-orange text-white">
            <h3 class="mb-0">Contact Information</h3>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="firstname" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstname" name="firstname" required />
              </div>
              <div class="col-md-6">
                <label for="lastname" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastname" name="lastname" required />
              </div>
              <div class="col-md-6">
                <label for="telephone" class="form-label">Telephone</label>
                <input type="tel" class="form-control" id="telephone" name="telephone" required readonly />
              </div>
              <div class="col-md-6">
                <label for="zipcode" class="form-label">Zip Code</label>
                <input type="text" class="form-control" id="zipcode" name="zipcode" required />
              </div>
              <div class="col-md-6">
                <label for="company" class="form-label">Company (optional)</label>
                <input type="text" class="form-control" id="company" name="company" />
              </div>
              <div class="col-md-6">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" required />
              </div>
              <div class="col-md-6">
                <label for="callbackDate" class="form-label">Preferred Callback Date</label>
                <input type="date" class="form-control" id="callbackDate" name="callbackDate" required />
              </div>
              <div class="col-md-6">
                <label for="callbackTime" class="form-label">Preferred Callback Time</label>
                <input type="time" class="form-control" id="callbackTime" name="callbackTime" required />
              </div>
            </div>

            <input type="hidden" name="_next" value="https://inquiries.womacromax.com/thanks.html" />
            <input type="hidden" name="_subject" value="New Form Submission!" />
            <input type="hidden" name="_cc" value="notifications@womacromax.com" />
            <input type="hidden" name="_captcha" value="false" />
            <input type="text" name="_honey" style="display:none" />
            <input type="hidden" name="_template" value="table" />
            <input type="hidden" id="hiddenMessagePart1" value="Inquiry from Womacromax Template Flyer:\n\nRequested Services:\n" />
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Draggable Button Grid -->
<div class="overlay-btn-grid" id="dragButtons">
  <button class="btn btn-secondary btn-lg" data-bs-toggle="modal" data-bs-target="#messageModal">Add Details</button>
  <button class="btn btn-secondary btn-lg" data-bs-toggle="modal" data-bs-target="#attachmentModal">Add Attachment</button>
  <button type="submit" form="contactForm" class="btn btn-success btn-lg">Send Message</button>
</div>

<!-- PhonePad Modal (iframe version) -->
<div class="modal fade modal-top" id="phonePadModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-dark text-white p-0 position-relative">
      <span class="position-absolute top-0 end-0 fs-4 p-2 text-white" role="button"
            onclick="bootstrap.Modal.getInstance(document.getElementById('phonePadModal')).hide()">Ã—</span>
      <iframe src="https://inquiries.womacromax.com/phonepad.html"
              width="100%" height="500" frameborder="0" style="border-radius: 0 0 10px 10px;"></iframe>
    </div>
  </div>
</div>

<!-- Modals -->
<div class="modal fade modal-top" id="messageModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Your Message</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <textarea class="form-control" id="message" name="message" rows="6" placeholder="Type your message..."></textarea>
      </div>
    </div>
  </div>
</div>

<div class="modal fade modal-top" id="attachmentModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title">Add Attachment</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <input type="file" class="form-control" name="attachment" accept="image/*" capture="environment" />
        <button type="button" class="btn btn-outline-primary w-100 mt-3" onclick="captureImage()">Capture Image</button>
        <button type="button" class="btn btn-outline-secondary w-100 mt-2" onclick="takeScreenshot()">Take Screenshot</button>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const inputFields = ['firstname', 'lastname', 'telephone', 'zipcode', 'company', 'email', 'callbackDate', 'callbackTime', 'message'];
inputFields.forEach(id => {
  const el = document.getElementById(id);
  if (el) {
    el.value = localStorage.getItem(id) || '';
    el.addEventListener('input', () => localStorage.setItem(id, el.value));
  }
});

let tempPhone = '';
function appendDigit(d) { tempPhone += d; }
function clearDigits() { tempPhone = ''; }
function sendToInput() {
  document.getElementById('telephone').value = tempPhone;
  localStorage.setItem('telephone', tempPhone);
  tempPhone = '';
  document.getElementById('phonePad').style.display = 'none';
}
document.getElementById('telephone').addEventListener('focus', () => {
  document.getElementById('phonePad').style.display = 'block';
});

document.addEventListener('click', function(e) {
  const pad = document.getElementById('phonePad');
  if (!pad.contains(e.target) && e.target.id !== 'telephone') {
    pad.style.display = 'none';
  }
});

function makeDraggable(id) {
  const el = document.getElementById(id);
  let pos = { x: 0, y: 0 };
  el.onmousedown = dragMouseDown;

  function dragMouseDown(e) {
    e.preventDefault();
    pos.x = e.clientX;
    pos.y = e.clientY;
    document.onmouseup = closeDrag;
    document.onmousemove = drag;
  }

  function drag(e) {
    e.preventDefault();
    const dx = e.clientX - pos.x;
    const dy = e.clientY - pos.y;
    pos.x = e.clientX;
    pos.y = e.clientY;
    el.style.top = (el.offsetTop + dy) + "px";
    el.style.left = (el.offsetLeft + dx) + "px";

    // Snap to edges
    const snapMargin = 30;
    const vw = window.innerWidth;
    if (el.offsetLeft < snapMargin) el.style.left = "0px";
    if ((vw - el.offsetLeft - el.offsetWidth) < snapMargin) el.style.left = (vw - el.offsetWidth) + "px";
  }

  function closeDrag() {
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
makeDraggable('dragButtons');
makeDraggable('phonePad');

function captureImage() { alert("Capture image triggered."); }
function takeScreenshot() { alert("Screenshot triggered."); }
</script>
</body>
</html>
