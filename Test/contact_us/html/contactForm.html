<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 1rem; /* 16px on all sides */
      background-color: #1e1e1e;
    }
    .card-grey { background-color: #e9ecef; }
    .bg-orange { background-color: #fd7e14; }
    #contactForm { padding-top: 100px; }
    .sticky-toolbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1035; /* Lowered to not interfere with modal backdrop */
      background-color: #f8f9fa;
      padding: 0.75rem 1rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .sticky-toolbar .btn { width: 100%; }
    .sticky-toolbar .row { margin: 0; }
    .sticky-placeholder { height: 75px; }
  </style>
</head>
<body class="bg-light">

<!-- Fixed Horizontal Button Overlay -->
<div class="sticky-toolbar">
  <div class="container-fluid">
    <div class="row gx-2">
      <div class="col-4">
        <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#messageModal">Add Details</button>
      </div>
      <div class="col-4">
        <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#attachmentModal">Add Attachment</button>
      </div>
      <div class="col-4">
        <button type="submit" form="contactForm" class="btn btn-success">Send Message</button>
      </div>
    </div>
  </div>
</div>
<div class="sticky-placeholder"></div>

<!-- Contact Form -->
<div class="container py-3">
  <div class="row justify-content-center">
    <div class="col-lg-10 col-md-11 col-sm-12">
      <form id="contactForm" action="https://formsubmit.co/ayoblab@gmail.com" method="POST" enctype="multipart/form-data">
        <div class="card card-grey shadow-sm mb-4">
          <div class="card-header bg-orange text-white">
            <h3 class="mb-0">Contact Information</h3>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="firstname" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstname" name="firstname" required />
              </div>
              <div class="col-md-6">
                <label for="lastname" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastname" name="lastname" required />
              </div>
              <div class="col-md-6">
                <label for="telephone" class="form-label">Telephone</label>
                <input type="tel" class="form-control" id="telephone" name="telephone" required readonly />
              </div>
              <div class="col-md-6">
                <label for="zipcode" class="form-label">Zip Code</label>
                <input type="text" class="form-control" id="zipcode" name="zipcode" required />
              </div>
              <div class="col-md-6">
                <label for="company" class="form-label">Company (optional)</label>
                <input type="text" class="form-control" id="company" name="company" />
              </div>
              <div class="col-md-6">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" required />
              </div>
              <div class="col-md-6">
                <label for="callbackDate" class="form-label">Preferred Callback Date</label>
                <input type="date" class="form-control" id="callbackDate" name="callbackDate" required />
              </div>
              <div class="col-md-6">
                <label for="callbackTime" class="form-label">Preferred Callback Time</label>
                <input type="time" class="form-control" id="callbackTime" name="callbackTime" required />
              </div>
            </div>

            <input type="hidden" name="_next" value="https://inquiries.womacromax.com/thanks.html" />
            <input type="hidden" name="_subject" value="New Form Submission!" />
            <input type="hidden" name="_cc" value="notifications@womacromax.com" />
            <input type="hidden" name="_captcha" value="false" />
            <input type="text" name="_honey" style="display:none" />
            <input type="hidden" name="_template" value="table" />
            <input type="hidden" id="hiddenMessagePart1" value="Inquiry from Womacromax Template Flyer:\n\nRequested Services:\n" />
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- PhonePad Modal -->
<div class="modal fade" id="phonePadModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered w-auto m-0">
    <div class="modal-content bg-dark text-white rounded-3 position-relative p-3">
      <!-- Close button -->
      <span class="position-absolute top-0 end-0 fs-4 p-2 text-white" role="button"
            onclick="bootstrap.Modal.getInstance(document.getElementById('phonePadModal')).hide()">Ã—</span>

      <!-- Auto-sizing iframe -->
      <iframe src="https://inquiries.womacromax.com/phonepad.html"
              frameborder="0"
              style="display: block; width: 375px; height: 667px; border-radius: 0.5rem;"></iframe>
    </div>
  </div>
</div>

<!-- Message Modal -->
<div class="modal fade" id="messageModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Your Message</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <textarea class="form-control" id="message" name="message" rows="6" placeholder="Type your message..."></textarea>
      </div>
    </div>
  </div>
</div>

<!-- Attachment Modal -->
<div class="modal fade" id="attachmentModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title">Add Attachment</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <input type="file" class="form-control" name="attachment" accept="image/*" capture="environment" />
        <button type="button" class="btn btn-outline-primary w-100 mt-3" onclick="captureImage()">Capture Image</button>
        <button type="button" class="btn btn-outline-secondary w-100 mt-2" onclick="takeScreenshot()">Take Screenshot</button>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const inputFields = ['firstname', 'lastname', 'telephone', 'zipcode', 'company', 'email', 'callbackDate', 'callbackTime', 'message'];
  inputFields.forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      el.value = localStorage.getItem(id) || '';
      el.addEventListener('input', () => localStorage.setItem(id, el.value));
    }
  });

  document.getElementById('telephone').addEventListener('focus', () => {
    const modal = new bootstrap.Modal(document.getElementById('phonePadModal'), {
      backdrop: true,
      keyboard: true
    });
    modal.show();
  });

  window.addEventListener('message', (event) => {
    const msg = event.data;
    if (msg === '__done__') {
      const modalEl = document.getElementById('phonePadModal');
      const instance = bootstrap.Modal.getInstance(modalEl);
      if (instance) instance.hide();
    } else if (typeof msg === 'string') {
      document.getElementById('telephone').value = msg;
      localStorage.setItem('telephone', msg);
    }
  });

  function captureImage() { alert("Capture image triggered."); }
  function takeScreenshot() { alert("Screenshot triggered."); }
</script>
</body>
</html>
