{"ast":null,"code":"import{createImage,getRadianAngle}from'./imageUtils';export default async function getCroppedImg(imageSrc,pixelCrop){let rotation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let flipX=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let opacity=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;const image=await createImage(imageSrc);const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');const rotRad=getRadianAngle(rotation);const safeArea=Math.max(image.width,image.height)*2;canvas.width=safeArea;canvas.height=safeArea;ctx.translate(safeArea/2,safeArea/2);ctx.rotate(rotRad);ctx.scale(flipX?-1:1,1);ctx.globalAlpha=opacity;ctx.translate(-image.width/2,-image.height/2);ctx.drawImage(image,0,0);const data=ctx.getImageData(pixelCrop.x,pixelCrop.y,pixelCrop.width,pixelCrop.height);canvas.width=pixelCrop.width;canvas.height=pixelCrop.height;ctx.putImageData(data,0,0);return canvas.toDataURL('image/png');}","map":{"version":3,"names":["createImage","getRadianAngle","getCroppedImg","imageSrc","pixelCrop","rotation","arguments","length","undefined","flipX","opacity","image","canvas","document","createElement","ctx","getContext","rotRad","safeArea","Math","max","width","height","translate","rotate","scale","globalAlpha","drawImage","data","getImageData","x","y","putImageData","toDataURL"],"sources":["C:/Users/blab9/source/repos/HEI/Test/WoMacroMAX/Utilities/image-editor/src/utils/cropImage.js"],"sourcesContent":["import { createImage, getRadianAngle } from './imageUtils';\r\n\r\nexport default async function getCroppedImg(imageSrc, pixelCrop, rotation = 0, flipX = false, opacity = 1) {\r\n  const image = await createImage(imageSrc);\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  const rotRad = getRadianAngle(rotation);\r\n  const safeArea = Math.max(image.width, image.height) * 2;\r\n\r\n  canvas.width = safeArea;\r\n  canvas.height = safeArea;\r\n\r\n  ctx.translate(safeArea / 2, safeArea / 2);\r\n  ctx.rotate(rotRad);\r\n  ctx.scale(flipX ? -1 : 1, 1);\r\n  ctx.globalAlpha = opacity;\r\n  ctx.translate(-image.width / 2, -image.height / 2);\r\n  ctx.drawImage(image, 0, 0);\r\n\r\n  const data = ctx.getImageData(pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height);\r\n  canvas.width = pixelCrop.width;\r\n  canvas.height = pixelCrop.height;\r\n  ctx.putImageData(data, 0, 0);\r\n\r\n  return canvas.toDataURL('image/png');\r\n}\r\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,cAAc,KAAQ,cAAc,CAE1D,cAAe,eAAe,CAAAC,aAAaA,CAACC,QAAQ,CAAEC,SAAS,CAA4C,IAA1C,CAAAC,QAAQ,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,IAAE,CAAAG,KAAK,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,IAAE,CAAAI,OAAO,CAAAJ,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CACvG,KAAM,CAAAK,KAAK,CAAG,KAAM,CAAAX,WAAW,CAACG,QAAQ,CAAC,CACzC,KAAM,CAAAS,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/C,KAAM,CAAAC,GAAG,CAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC,CAEnC,KAAM,CAAAC,MAAM,CAAGhB,cAAc,CAACI,QAAQ,CAAC,CACvC,KAAM,CAAAa,QAAQ,CAAGC,IAAI,CAACC,GAAG,CAACT,KAAK,CAACU,KAAK,CAAEV,KAAK,CAACW,MAAM,CAAC,CAAG,CAAC,CAExDV,MAAM,CAACS,KAAK,CAAGH,QAAQ,CACvBN,MAAM,CAACU,MAAM,CAAGJ,QAAQ,CAExBH,GAAG,CAACQ,SAAS,CAACL,QAAQ,CAAG,CAAC,CAAEA,QAAQ,CAAG,CAAC,CAAC,CACzCH,GAAG,CAACS,MAAM,CAACP,MAAM,CAAC,CAClBF,GAAG,CAACU,KAAK,CAAChB,KAAK,CAAG,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CAC5BM,GAAG,CAACW,WAAW,CAAGhB,OAAO,CACzBK,GAAG,CAACQ,SAAS,CAAC,CAACZ,KAAK,CAACU,KAAK,CAAG,CAAC,CAAE,CAACV,KAAK,CAACW,MAAM,CAAG,CAAC,CAAC,CAClDP,GAAG,CAACY,SAAS,CAAChB,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CAE1B,KAAM,CAAAiB,IAAI,CAAGb,GAAG,CAACc,YAAY,CAACzB,SAAS,CAAC0B,CAAC,CAAE1B,SAAS,CAAC2B,CAAC,CAAE3B,SAAS,CAACiB,KAAK,CAAEjB,SAAS,CAACkB,MAAM,CAAC,CAC1FV,MAAM,CAACS,KAAK,CAAGjB,SAAS,CAACiB,KAAK,CAC9BT,MAAM,CAACU,MAAM,CAAGlB,SAAS,CAACkB,MAAM,CAChCP,GAAG,CAACiB,YAAY,CAACJ,IAAI,CAAE,CAAC,CAAE,CAAC,CAAC,CAE5B,MAAO,CAAAhB,MAAM,CAACqB,SAAS,CAAC,WAAW,CAAC,CACtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}