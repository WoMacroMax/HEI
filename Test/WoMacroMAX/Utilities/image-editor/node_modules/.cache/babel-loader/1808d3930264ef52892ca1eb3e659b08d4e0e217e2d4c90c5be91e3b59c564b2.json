{"ast":null,"code":"import { createImage, getRadianAngle } from './imageUtils';\nexport default async function getCroppedImg(imageSrc, pixelCrop, rotation = 0, flipX = false, opacity = 1) {\n  const image = await createImage(imageSrc);\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const rotRad = getRadianAngle(rotation);\n  const safeArea = Math.max(image.width, image.height) * 2;\n  canvas.width = safeArea;\n  canvas.height = safeArea;\n  ctx.translate(safeArea / 2, safeArea / 2);\n  ctx.rotate(rotRad);\n  ctx.scale(flipX ? -1 : 1, 1);\n  ctx.globalAlpha = opacity;\n  ctx.translate(-image.width / 2, -image.height / 2);\n  ctx.drawImage(image, 0, 0);\n  const data = ctx.getImageData(pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height);\n  canvas.width = pixelCrop.width;\n  canvas.height = pixelCrop.height;\n  ctx.putImageData(data, 0, 0);\n  return canvas.toDataURL('image/png');\n}","map":{"version":3,"names":["createImage","getRadianAngle","getCroppedImg","imageSrc","pixelCrop","rotation","flipX","opacity","image","canvas","document","createElement","ctx","getContext","rotRad","safeArea","Math","max","width","height","translate","rotate","scale","globalAlpha","drawImage","data","getImageData","x","y","putImageData","toDataURL"],"sources":["C:/Users/blab9/source/repos/HEI/Test/WoMacroMAX/Utilities/image-editor/src/utils/cropImage.js"],"sourcesContent":["import { createImage, getRadianAngle } from './imageUtils';\r\n\r\nexport default async function getCroppedImg(imageSrc, pixelCrop, rotation = 0, flipX = false, opacity = 1) {\r\n  const image = await createImage(imageSrc);\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  const rotRad = getRadianAngle(rotation);\r\n  const safeArea = Math.max(image.width, image.height) * 2;\r\n\r\n  canvas.width = safeArea;\r\n  canvas.height = safeArea;\r\n\r\n  ctx.translate(safeArea / 2, safeArea / 2);\r\n  ctx.rotate(rotRad);\r\n  ctx.scale(flipX ? -1 : 1, 1);\r\n  ctx.globalAlpha = opacity;\r\n  ctx.translate(-image.width / 2, -image.height / 2);\r\n  ctx.drawImage(image, 0, 0);\r\n\r\n  const data = ctx.getImageData(pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height);\r\n  canvas.width = pixelCrop.width;\r\n  canvas.height = pixelCrop.height;\r\n  ctx.putImageData(data, 0, 0);\r\n\r\n  return canvas.toDataURL('image/png');\r\n}\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,cAAc,QAAQ,cAAc;AAE1D,eAAe,eAAeC,aAAaA,CAACC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,GAAG,CAAC,EAAEC,KAAK,GAAG,KAAK,EAAEC,OAAO,GAAG,CAAC,EAAE;EACzG,MAAMC,KAAK,GAAG,MAAMR,WAAW,CAACG,QAAQ,CAAC;EACzC,MAAMM,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/C,MAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;EAEnC,MAAMC,MAAM,GAAGb,cAAc,CAACI,QAAQ,CAAC;EACvC,MAAMU,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAACT,KAAK,CAACU,KAAK,EAAEV,KAAK,CAACW,MAAM,CAAC,GAAG,CAAC;EAExDV,MAAM,CAACS,KAAK,GAAGH,QAAQ;EACvBN,MAAM,CAACU,MAAM,GAAGJ,QAAQ;EAExBH,GAAG,CAACQ,SAAS,CAACL,QAAQ,GAAG,CAAC,EAAEA,QAAQ,GAAG,CAAC,CAAC;EACzCH,GAAG,CAACS,MAAM,CAACP,MAAM,CAAC;EAClBF,GAAG,CAACU,KAAK,CAAChB,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;EAC5BM,GAAG,CAACW,WAAW,GAAGhB,OAAO;EACzBK,GAAG,CAACQ,SAAS,CAAC,CAACZ,KAAK,CAACU,KAAK,GAAG,CAAC,EAAE,CAACV,KAAK,CAACW,MAAM,GAAG,CAAC,CAAC;EAClDP,GAAG,CAACY,SAAS,CAAChB,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;EAE1B,MAAMiB,IAAI,GAAGb,GAAG,CAACc,YAAY,CAACtB,SAAS,CAACuB,CAAC,EAAEvB,SAAS,CAACwB,CAAC,EAAExB,SAAS,CAACc,KAAK,EAAEd,SAAS,CAACe,MAAM,CAAC;EAC1FV,MAAM,CAACS,KAAK,GAAGd,SAAS,CAACc,KAAK;EAC9BT,MAAM,CAACU,MAAM,GAAGf,SAAS,CAACe,MAAM;EAChCP,GAAG,CAACiB,YAAY,CAACJ,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;EAE5B,OAAOhB,MAAM,CAACqB,SAAS,CAAC,WAAW,CAAC;AACtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}